/******************************************************************************/
/*           Generated by IBExpert 2024.1.22.1 25/03/2024 22:16:04            */
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1252;

SET CLIENTLIB 'C:\Temp\Posto ABC\Banco\fbclient.dll';

CREATE DATABASE 'localhost:C:\Temp\Posto ABC\Banco\postoabc.fdb'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 16384
DEFAULT CHARACTER SET WIN1252 COLLATION WIN1252;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/



CREATE TABLE ABASTECIMENTOS (
    COD_BOMBA           INTEGER,
    COD_TANQUE          INTEGER,
    TIPO                INTEGER,
    VALOR_TOTAL         DECIMAL(15,2),
    TOTAL_LITROS        DECIMAL(15,3),
    DATA_ABASTECIMENTO  DATE
);

CREATE TABLE BOMBAS (
    COD_BOMBA   INTEGER NOT NULL,
    DESCRICAO   VARCHAR(150),
    COD_TANQUE  INTEGER
);

CREATE TABLE PRECOS (
    COD_PRECOS        INTEGER NOT NULL,
    DESCRICAO         VARCHAR(50),
    TIPO              VARCHAR(10),
    PRECOS_LITRO      DECIMAL(15,2),
    TAXA              DECIMAL(15,2),
    ATIVO             VARCHAR(10),
    DATA_INCLUSAO     DATE,
    DATA_ATUALIZACAO  DATE
);

CREATE TABLE TANQUES (
    COD_TANQUE         INTEGER NOT NULL,
    DESCRICAO          VARCHAR(150),
    TIPO               VARCHAR(1),
    CAPACIDADE_LITROS  NUMERIC(15,3),
    TOTAL_LITROS       NUMERIC(15,3),
    DATA_ATUALIZACAO   DATE,
    DATA_INCLUSAO      DATE
);

INSERT INTO TANQUES (COD_TANQUE, DESCRICAO, TIPO, CAPACIDADE_LITROS, TOTAL_LITROS, DATA_ATUALIZACAO, DATA_INCLUSAO) VALUES (1, 'GASOLINA', '0', 41000, 34985.106, '2024-03-24', '2024-03-24');
INSERT INTO TANQUES (COD_TANQUE, DESCRICAO, TIPO, CAPACIDADE_LITROS, TOTAL_LITROS, DATA_ATUALIZACAO, DATA_INCLUSAO) VALUES (2, 'DIESEL', '1', 40000, 34989.44, '2024-03-24', '2024-03-24');


COMMIT WORK;

INSERT INTO PRECOS (COD_PRECOS, DESCRICAO, TIPO, PRECOS_LITRO, TAXA, ATIVO, DATA_INCLUSAO, DATA_ATUALIZACAO) VALUES (1, 'PROMO CARNAVAL', '0', 5.11, 13, 'SIM', '2024-03-24', '2024-03-24');
INSERT INTO PRECOS (COD_PRECOS, DESCRICAO, TIPO, PRECOS_LITRO, TAXA, ATIVO, DATA_INCLUSAO, DATA_ATUALIZACAO) VALUES (2, 'PRO NATAL', '1', 4.19, 13, 'SIM', '2024-03-24', '2024-03-24');


COMMIT WORK;

INSERT INTO BOMBAS (COD_BOMBA, DESCRICAO, COD_TANQUE) VALUES (1, 'GASOL 1', 1);
INSERT INTO BOMBAS (COD_BOMBA, DESCRICAO, COD_TANQUE) VALUES (2, 'GASOL 2', 1);
INSERT INTO BOMBAS (COD_BOMBA, DESCRICAO, COD_TANQUE) VALUES (3, 'DIESEL 1', 2);
INSERT INTO BOMBAS (COD_BOMBA, DESCRICAO, COD_TANQUE) VALUES (4, 'DIESEL 2', 2);


COMMIT WORK;

INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (1, 1, 0, 0, 0, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (1, 1, 0, 100, 17.318, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (1, 1, 0, 230, 39.832, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (2, 1, 0, 288, 49.876, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (2, 1, 0, 86, 14.894, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (3, 2, 0, 118, 24.922, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (3, 2, 0, 30, 6.336, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (4, 2, 0, 213, 44.987, '2024-03-24');
INSERT INTO ABASTECIMENTOS (COD_BOMBA, COD_TANQUE, TIPO, VALOR_TOTAL, TOTAL_LITROS, DATA_ABASTECIMENTO) VALUES (4, 2, 0, 50, 10.56, '2024-03-24');


COMMIT WORK;



/******************************************************************************/
/*                                Primary keys                                */
/******************************************************************************/

ALTER TABLE BOMBAS ADD CONSTRAINT PK_BOMBAS PRIMARY KEY (COD_BOMBA);
ALTER TABLE PRECOS ADD CONSTRAINT PK_PRECOS PRIMARY KEY (COD_PRECOS);
ALTER TABLE TANQUES ADD CONSTRAINT PK_TANQUES PRIMARY KEY (COD_TANQUE);


/******************************************************************************/
/*                                Foreign keys                                */
/******************************************************************************/

ALTER TABLE ABASTECIMENTOS ADD CONSTRAINT FK_ABASTECIMENTOS_1 FOREIGN KEY (COD_BOMBA) REFERENCES BOMBAS (COD_BOMBA);
ALTER TABLE ABASTECIMENTOS ADD CONSTRAINT FK_ABASTECIMENTOS_2 FOREIGN KEY (COD_TANQUE) REFERENCES TANQUES (COD_TANQUE);
ALTER TABLE BOMBAS ADD CONSTRAINT FK_BOMBAS_TANQUE FOREIGN KEY (COD_TANQUE) REFERENCES TANQUES (COD_TANQUE);